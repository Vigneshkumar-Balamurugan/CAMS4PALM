# PALM4U Chemical Boundary Condition Preparation from CAMS

This MATLAB program prepares **boundary conditions for chemical species** from the **CAMS (Copernicus Atmosphere Monitoring Service) model** for input into the **PALM4U model**.  
It rewrites or appends chemical species data to an existing **dynamic driver** file generated by **[WRF4PALM](https://github.com/dongqi-DQ/WRF4PALM)**.

## Features

- Process DEM (Digital Elevation Model) data for the PALM4U domain.
- Extract PALM model run times and dynamic field information.
- Process CAMS Reanalysis data for selected chemical species.
- Generate updated NetCDF dynamic driver files including gaseous boundary conditions.
- Compatible with PALM chemistry mechanisms **SMOG** and **CBM4**.

## Requirements

- MATLAB (tested with R2022b and newer)
- Input files:
  - Preprocessed DEM file (`.tif`) from GEO4PALM
  - Dynamic driver file (`.nc`) from WRF4PALM
  - CAMS reanalysis dataset (Europe)
  - CAMS altitude reference CSV file

## Usage

1. Set input file paths and parameters in the script:

```matlab
dem_palm_file = "path_to/Munich_static_dem.tif";
dynamic_dri_file = "path_to/dynamic_driver.nc";
cams_folder = 'path_to/CAMS_europe_reanalysis_clip';
spe_to_inc = {'co', 'no', 'no2', 'o3', 'pm2p5', 'pm10', 'chocho', 'hcho', 'nh3', 'nmvoc'};
nmvoc_to_rh_ratio = 1;
palm_smog = 'NO';
palm_cbm4 = 'NO';
cams_alt_ref_file = 'path_to/cams_pres_level_info.csv';
dynamic_dri_file_incl_gas = 'path_to/dynamic_driver_with_gas_bc.nc';
